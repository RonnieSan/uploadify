/*
UploadiFive 1.2.3
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License
*/
(function(d){var o={init:function(t){return this.i(function(){var s=d(this);s.data("uploadifive",{t:{},o:0,l:0,u:{count:0,selected:0,s:0,p:0,v:0,h:0},m:{g:0,_:0,F:0,p:0,count:0}});var p=s.data("uploadifive");var c=p.D=d.extend({I:true,T:false,L:"Select Files",C:false,N:true,M:false,q:"Filedata",O:0,U:false,k:{},height:30,X:false,method:"post",R:true,B:[],S:false,A:0,P:false,j:0,H:0,V:0,Y:"uploadifive.php",width:100},t);var r;if(c.U){r=c.U.split("|")}if(isNaN(c.O)){var e=parseInt(c.O)*1.024;if(c.O.indexOf("KB")>-1){c.O=e*1e3}else if(c.O.indexOf("MB")>-1){c.O=e*1e6}else if(c.O.indexOf("GB")>-1){c.O=e*1e9}}else{c.O=c.O*1024}p.Z=d('<input type="file">').G({"font-size":c.height+"px",opa!function(e){var t={init:function(i){return this.each(function(){var n=e(this);n.data("uploadifive",{inputs:{},inputCount:0,fileID:0,queue:{count:0,selected:0,replaced:0,errors:0,queued:0,cancelled:0},uploads:{current:0,attempts:0,successful:0,errors:0,count:0}});var o,r=n.data("uploadifive"),u=r.settings=e.extend({auto:!0,buttonClass:!1,buttonText:"Select Files",checkScript:!1,dnd:!0,dropTarget:!1,fileObjName:"Filedata",fileSizeLimit:0,fileType:!1,formData:{},height:30,itemTemplate:!1,method:"post",multi:!0,overrideEvents:[],queueID:!1,queueSizeLimit:0,removeCompleted:!1,simUploadLimit:0,truncateLength:0,uploadLimit:0,uploadScript:"uploadifive.php",width:100},i);if(u.fileType&&(o=u.fileType.split("|")),isNaN(u.fileSizeLimit)){var l=1.024*parseInt(u.fileSizeLimit);u.fileSizeLimit.indexOf("KB")>-1?u.fileSizeLimit=1e3*l:u.fileSizeLimit.indexOf("MB")>-1?u.fileSizeLimit=1e6*l:u.fileSizeLimit.indexOf("GB")>-1&&(u.fileSizeLimit=1e9*l)}else u.fileSizeLimit=1024*u.fileSizeLimit;if(r.inputTemplate=e('<input type="file">').css({"font-size":u.height+"px",opacity:0,position:"absolute",right:"-3px",top:"-3px","z-index":999}),r.createInput=function(){var i=r.inputTemplate.clone(),o=i.name="input"+r.inputCount++;u.multi&&i.attr("multiple",!0),u.fileType&&i.attr("accept",u.fileType),i.bind("change",function(){r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var i=this.files.length;if(r.queue.selected=i,r.queue.count+i>u.queueSizeLimit&&0!==u.queueSizeLimit)e.inArray("onError",u.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+u.queueSizeLimit+").  Please select fewer files."),"function"==typeof u.onError&&u.onError.call(n,"QUEUE_LIMIT_EXCEEDED");else{for(var l=0;l<i;l++)file=this.files[l],r.addQueueItem(file);r.inputs[o]=this,r.createInput()}u.auto&&t.upload.call(n),"function"==typeof u.onSelect&&u.onSelect.call(n,r.queue)}),r.currentInput&&r.currentInput.hide(),r.button.append(i),r.currentInput=i},r.destroyInput=function(t){e(r.inputs[t]).remove(),delete r.inputs[t],r.inputCount--},r.drop=function(i){i.preventDefault(),i.stopPropagation(),r.queue.selected=0,r.queue.replaced=0,r.queue.errors=0,r.queue.queued=0;var l=i.dataTransfer,a=l.name="input"+r.inputCount++,s=l.files.length;if(r.queue.selected=s,r.queue.count+s>u.queueSizeLimit&&0!==u.queueSizeLimit)e.inArray("onError",u.overrideEvents)<0&&alert("The maximum number of queue items has been reached ("+u.queueSizeLimit+").  Please select fewer files."),"function"==typeof u.onError&&u.onError.call(n,"QUEUE_LIMIT_EXCEEDED");else{for(var p=0;p<s;p++)file=l.files[p],r.addQueueItem(file),o&&-1===o.indexOf(file.type)&&r.error("FORBIDDEN_FILE_TYPE",file);r.inputs[a]=l}u.auto&&t.upload.call(n),"function"==typeof u.onDrop&&u.onDrop.call(n,l.files,l.files.length)},r.fileExistsInQueue=function(e){for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var i=0;i<limit;i++)if(existingFile=input.files[i],existingFile.name==e.name&&!existingFile.complete)return!0}return!1},r.removeExistingFile=function(e){for(var i in r.inputs){input=r.inputs[i],limit=input.files.length;for(var o=0;o<limit;o++)existingFile=input.files[o],existingFile.name!=e.name||existingFile.complete||(r.queue.replaced++,t.cancel.call(n,existingFile,!0))}},!1===u.itemTemplate?r.queueItem=e('<div class="uploadifive-queue-item"><a class="close" href="#">X</a><div><span class="filename"></span><span class="fileinfo"></span></div><div class="progress"><div class="progress-bar"></div></div></div>'):r.queueItem=e(u.itemTemplate),r.addQueueItem=function(i){if(e.inArray("onAddQueueItem",u.overrideEvents)<0){r.removeExistingFile(i),i.queueItem=r.queueItem.clone(),i.queueItem.attr("id",u.id+"-file-"+r.fileID++),i.queueItem.find(".close").bind("click",function(){return t.cancel.call(n,i),!1});var o=i.name;o.length>u.truncateLength&&0!==u.truncateLength&&(o=o.substring(0,u.truncateLength)+"..."),i.queueItem.find(".filename").html(o),i.queueItem.data("file",i),r.queueEl.append(i.queueItem)}"function"==typeof u.onAddQueueItem&&u.onAddQueueItem.call(n,i),i.size>u.fileSizeLimit&&0!==u.fileSizeLimit?r.error("FILE_SIZE_LIMIT_EXCEEDED",i):(r.queue.queued++,r.queue.count++)},r.removeQueueItem=function(t,i,n){n||(n=0);var o=i?0:500;t.queueItem&&(" - Completed"!=t.queueItem.find(".fileinfo").html()&&t.queueItem.find(".fileinfo").html(" - Cancelled"),t.queueItem.find(".progress-bar").width(0),t.queueItem.delay(n).fadeOut(o,function(){e(this).remove()}),delete t.queueItem,r.queue.count--)},r.filesToUpload=function(){var e=0;for(var t in r.inputs){input=r.inputs[t],limit=input.files.length;for(var i=0;i<limit;i++)file=input.files[i],file.skip||file.complete||e++}return e},r.checkExists=function(i){if(e.inArray("onCheck",u.overrideEvents)<0){e.ajaxSetup({async:!1});var o=e.extend(u.formData,{filename:i.name});if(e.post(u.checkScript,o,function(e){i.exists=parseInt(e)}),i.exists&&!confirm("A file named "+i.name+" already exists in the upload folder.\nWould you like to replace it?"))return t.cancel.call(n,i),!0}return"function"==typeof u.onCheck&&u.onCheck.call(n,i,i.exists),!1},r.uploadFile=function(t,i){if(!t.skip&&!t.complete&&!t.uploading)if(t.uploading=!0,r.uploads.current++,r.uploads.attempted++,xhr=t.xhr=new XMLHttpRequest,"function"==typeof FormData||"object"==typeof FormData){var o=new FormData;for(var l in o.append(u.fileObjName,t),u.formData)o.append(l,u.formData[l]);xhr.open(u.method,u.uploadScript,!0),xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&r.progress(e,t)},!1),xhr.addEventListener("load",function(e){4==this.readyState&&(t.uploading=!1,200==this.status?"Invalid file type."!==t.xhr.responseText?r.uploadComplete(e,t,i):r.error(t.xhr.responseText,t,i):404==this.status?r.error("404_FILE_NOT_FOUND",t,i):403==this.status?r.error("403_FORBIDDEN",t,i):r.error("Unknown Error",t,i))}),xhr.send(o)}else{var a=new FileReader;a.onload=function(o){var l="-------------------------"+(new Date).getTime(),a="\r\n",s="";for(var p in s+="--"+l+a,s+='Content-Disposition: form-data; name="'+u.fileObjName+'"',t.name&&(s+='; filename="'+t.name+'"'),s+=a,s+="Content-Type: application/octet-stream\r\n\r\n",s+=o.target.result+a,u.formData)s+="--"+l+a,s+='Content-Disposition: form-data; name="'+p+'"'+a+a,s+=u.formData[p]+a;s+="--"+l+"--"+a,xhr.upload.addEventListener("progress",function(e){r.progress(e,t)},!1),xhr.addEventListener("load",function(e){t.uploading=!1,404==this.status?r.error("404_FILE_NOT_FOUND",t,i):"Invalid file type."!=t.xhr.responseText?r.uploadComplete(e,t,i):r.error(t.xhr.responseText,t,i)},!1);u.uploadScript;"get"==u.method&&e(u.formData).param();xhr.open(u.method,u.uploadScript,!0),xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+l),"function"==typeof u.onUploadFile&&u.onUploadFile.call(n,t),xhr.sendAsBinary(s)},a.readAsBinaryString(t)}},r.progress=function(t,i){var o;e.inArray("onProgress",u.overrideEvents)<0&&(t.lengthComputable&&(o=Math.round(t.loaded/t.total*100)),i.queueItem.find(".fileinfo").html(" - "+o+"%"),i.queueItem.find(".progress-bar").css("width",o+"%")),"function"==typeof u.onProgress&&u.onProgress.call(n,i,t)},r.error=function(i,o,l){if(e.inArray("onError",u.overrideEvents)<0){switch(i){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error"}o.queueItem.addClass("error").find(".fileinfo").html(" - "+errorMsg),o.queueItem.find(".progress").remove()}"function"==typeof u.onError&&u.onError.call(n,i,o),o.skip=!0,"404_FILE_NOT_FOUND"==i?r.uploads.errors++:r.queue.errors++,l&&t.upload.call(n,null,!0)},r.uploadComplete=function(i,o,l){e.inArray("onUploadComplete",u.overrideEvents)<0&&(o.queueItem.find(".progress-bar").css("width","100%"),o.queueItem.find(".fileinfo").html(" - Completed"),o.queueItem.find(".progress").slideUp(250),o.queueItem.addClass("complete")),"function"==typeof u.onUploadComplete&&u.onUploadComplete.call(n,o,o.xhr.responseText),u.removeCompleted&&setTimeout(function(){t.cancel.call(n,o)},3e3),o.complete=!0,r.uploads.successful++,r.uploads.count++,r.uploads.current--,delete o.xhr,l&&t.upload.call(n,null,!0)},r.queueComplete=function(){"function"==typeof u.onQueueComplete&&u.onQueueComplete.call(n,r.uploads)},!(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)))return"function"==typeof u.onFallback&&u.onFallback.call(n),!1;if(u.id="uploadifive-"+n.attr("id"),r.button=e('<div id="'+u.id+'" class="uploadifive-button">'+u.buttonText+"</div>"),u.buttonClass&&r.button.addClass(u.buttonClass),r.button.css({height:u.height,"line-height":u.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:u.width}),n.before(r.button).appendTo(r.button).hide(),r.createInput.call(n),u.queueID?r.queueEl=e("#"+u.queueID):(u.queueID=u.id+"-queue",r.queueEl=e('<div id="'+u.queueID+'" class="uploadifive-queue" />'),r.button.after(r.queueEl)),u.dnd){var a=u.dropTarget?e(u.dropTarget):r.queueEl.get(0);a.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation()},!1),a.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation()},!1),a.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()},!1),a.addEventListener("drop",r.drop,!1)}XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(e){var t=Array.prototype.map.call(e,function(e){return 255&e.charCodeAt(0)}),i=new Uint8Array(t);this.send(i.buffer)}),"function"==typeof u.onInit&&u.onInit.call(n)})},debug:function(){return this.each(function(){console.log(e(this).data("uploadifive"))})},clearQueue:function(){this.each(function(){var n=e(this),o=n.data("uploadifive"),r=o.settings;for(var u in o.inputs)for(input=o.inputs[u],limit=input.files.length,i=0;i<limit;i++)file=input.files[i],t.cancel.call(n,file);"function"==typeof r.onClearQueue&&r.onClearQueue.call(n,e("#"+o.settings.queueID))})},cancel:function(i,n){this.each(function(){var o=e(this),r=o.data("uploadifive"),u=r.settings;"string"==typeof i&&(isNaN(i)||(fileID="uploadifive-"+e(this).attr("id")+"-file-"+i),i=e("#"+fileID).data("file")),i.skip=!0,r.filesCancelled++,i.uploading&&(r.uploads.current--,i.uploading=!1,i.xhr.abort(),delete i.xhr,t.upload.call(o)),e.inArray("onCancel",u.overrideEvents)<0&&r.removeQueueItem(i,n),"function"==typeof u.onCancel&&u.onCancel.call(o,i)})},upload:function(t,i){this.each(function(){var n=e(this),o=n.data("uploadifive"),r=o.settings;if(t)o.uploadFile.call(n,t);else if(o.uploads.count+o.uploads.current<r.uploadLimit||0===r.uploadLimit){if(!i){o.uploads.attempted=0,o.uploads.successsful=0,o.uploads.errors=0;var u=o.filesToUpload();"function"==typeof r.onUpload&&r.onUpload.call(n,u)}e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").each(function(){if(_file=e(this).data("file"),o.uploads.current>=r.simUploadLimit&&0!==r.simUploadLimit||o.uploads.current>=r.uploadLimit&&0!==r.uploadLimit||o.uploads.count>=r.uploadLimit&&0!==r.uploadLimit)return!1;r.checkScript?(_file.checking=!0,skipFile=o.checkExists(_file),_file.checking=!1,skipFile||o.uploadFile(_file,!0)):o.uploadFile(_file,!0)}),0===e("#"+r.queueID).find(".uploadifive-queue-item").not(".error, .complete").size()&&o.queueComplete()}else 0===o.uploads.current&&(e.inArray("onError",r.overrideEvents)<0&&o.filesToUpload()>0&&0!==r.uploadLimit&&alert("The maximum upload limit has been reached."),"function"==typeof r.onError&&r.onError.call(n,"UPLOAD_LIMIT_EXCEEDED",o.filesToUpload()))})},destroy:function(){this.each(function(){var i=e(this),n=i.data("uploadifive"),o=n.settings;t.clearQueue.call(i),o.queueID||e("#"+o.queueID).remove(),i.siblings("input").remove(),i.show().insertBefore(n.button),n.button.remove(),"function"==typeof o.onDestroy&&o.onDestroy.call(i)})}};e.fn.uploadifive=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("The method "+i+" does not exist in $.uploadify"):t.init.apply(this,arguments)}}(jQuery);city:0,position:"absolute",right:"-3px",top:"-3px","z-index":999});p.K=function(){var e=p.Z.clone();var t=e.name="input"+p.o++;if(c.R){e.W("multiple",true)}if(c.U){e.W("accept",c.U)}e.bind("change",function(){p.u.selected=0;p.u.s=0;p.u.p=0;p.u.v=0;var e=this.files.length;p.u.selected=e;if(p.u.count+e>c.A&&c.A!==0){if(d.$("onError",c.B)<0){alert("The maximum number of queue items has been reached ("+c.A+").  Please select fewer files.")}if(typeof c.J==="function"){c.J.call(s,"QUEUE_LIMIT_EXCEEDED")}}else{for(var i=0;i<e;i++){file=this.files[i];p.ee(file)}p.t[t]=this;p.K()}if(c.I){o.upload.call(s)}if(typeof c.ie==="function"){c.ie.call(s,p.u)}});if(p.te){p.te.hide()}p.button.append(e);p.te=e};p.fe=function(e){d(p.t[e]).remove();delete p.t[e];p.o--};p.ne=function(e){e.preventDefault();e.stopPropagation();p.u.selected=0;p.u.s=0;p.u.p=0;p.u.v=0;var i=e.dataTransfer;var t=i.name="input"+p.o++;var f=i.files.length;p.u.selected=f;if(p.u.count+f>c.A&&c.A!==0){if(d.$("onError",c.B)<0){alert("The maximum number of queue items has been reached ("+c.A+").  Please select fewer files.")}if(typeof c.J==="function"){c.J.call(s,"QUEUE_LIMIT_EXCEEDED")}}else{for(var n=0;n<f;n++){file=i.files[n];p.ee(file);if(r&&r.indexOf(file.type)===-1){p.error("FORBIDDEN_FILE_TYPE",file)}}p.t[t]=i}if(c.I){o.upload.call(s)}if(typeof c.re==="function"){c.re.call(s,i.files,i.files.length)}};p.oe=function(e){for(var i in p.t){input=p.t[i];limit=input.files.length;for(var t=0;t<limit;t++){existingFile=input.files[t];if(existingFile.name==e.name&&!existingFile.complete){return true}}}return false};p.le=function(e){for(var i in p.t){input=p.t[i];limit=input.files.length;for(var t=0;t<limit;t++){existingFile=input.files[t];if(existingFile.name==e.name&&!existingFile.complete){p.u.s++;o.cancel.call(s,existingFile,true)}}}};if(c.X===false){p.ae=d('<div class="uploadifive-queue-item">'+'<a class="close" href="#">X</a>'+'<div><span class="filename"></span><span class="fileinfo"></span></div>'+'<div class="progress">'+'<div class="progress-bar"></div>'+"</div>"+"</div>")}else{p.ae=d(c.X)}p.ee=function(e){if(d.$("onAddQueueItem",c.B)<0){p.le(e);e.ae=p.ae.clone();e.ae.W("id",c.id+"-file-"+p.l++);e.ae.find(".close").bind("click",function(){o.cancel.call(s,e);return false});var i=e.name;if(i.length>c.H&&c.H!==0){i=i.substring(0,c.H)+"..."}e.ae.find(".filename").ue(i);e.ae.data("file",e);p.se.append(e.ae)}if(typeof c.pe==="function"){c.pe.call(s,e)}if(e.size>c.O&&c.O!==0){p.error("FILE_SIZE_LIMIT_EXCEEDED",e)}else{p.u.v++;p.u.count++}};p.ce=function(e,i,t){if(!t)t=0;var f=i?0:500;if(e.ae){if(e.ae.find(".fileinfo").ue()!=" - Completed"){e.ae.find(".fileinfo").ue(" - Cancelled")}e.ae.find(".progress-bar").width(0);e.ae.ve(t).de(f,function(){d(this).remove()});delete e.ae;p.u.count--}};p.he=function(){var e=0;for(var i in p.t){input=p.t[i];limit=input.files.length;for(var t=0;t<limit;t++){file=input.files[t];if(!file.me&&!file.complete){e++}}}return e};p.Ee=function(i){if(d.$("onCheck",c.B)<0){d.ye({async:false});var e=d.extend(c.k,{filename:i.name});d.ge(c.C,e,function(e){i._e=parseInt(e)});if(i._e){if(!confirm("A file named "+i.name+" already exists in the upload folder.\nWould you like to replace it?")){o.cancel.call(s,i);return true}}}if(typeof c.Fe==="function"){c.Fe.call(s,i,i._e)}return false};p.De=function(a,u){if(!a.me&&!a.complete&&!a.Ie){a.Ie=true;p.m.g++;p.m.xe++;xhr=a.be=new XMLHttpRequest;if(typeof FormData==="function"||typeof FormData==="object"){var e=new FormData;e.append(c.q,a);for(var i in c.k){e.append(i,c.k[i])}xhr.open(c.method,c.Y,true);xhr.upload.addEventListener("progress",function(e){if(e.lengthComputable){p.we(e,a)}},false);xhr.addEventListener("load",function(e){if(this.readyState==4){a.Ie=false;if(this.status==200){if(a.be.responseText!=="Invalid file type."){p.Te(e,a,u)}else{p.error(a.be.responseText,a,u)}}else if(this.status==404){p.error("404_FILE_NOT_FOUND",a,u)}else if(this.status==403){p.error("403_FORBIDDEN",a,u)}else{p.error("Unknown Error",a,u)}}});xhr.send(e)}else{var t=new FileReader;t.onload=function(e){var i="-------------------------"+(new Date).getTime(),t="--",f="\r\n",n="";n+=t+i+f;n+='Content-Disposition: form-data; name="'+c.q+'"';if(a.name){n+='; filename="'+a.name+'"'}n+=f;n+="Content-Type: application/octet-stream"+f+f;n+=e.target.result+f;for(var r in c.k){n+=t+i+f;n+='Content-Disposition: form-data; name="'+r+'"'+f+f;n+=c.k[r]+f}n+=t+i+t+f;xhr.upload.addEventListener("progress",function(e){p.we(e,a)},false);xhr.addEventListener("load",function(e){a.Ie=false;var i=this.status;if(i==404){p.error("404_FILE_NOT_FOUND",a,u)}else{if(a.be.responseText!="Invalid file type."){p.Te(e,a,u)}else{p.error(a.be.responseText,a,u)}}},false);var o=c.Y;if(c.method=="get"){var l=d(c.k).Le();o+=l}xhr.open(c.method,c.Y,true);xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+i);if(typeof c.Ce==="function"){c.Ce.call(s,a)}xhr.sendAsBinary(n)};t.readAsBinaryString(a)}}};p.we=function(e,i){var t;if(d.$("onProgress",c.B)<0){if(e.lengthComputable){t=Math.round(e.loaded/e.total*100)}i.ae.find(".fileinfo").ue(" - "+t+"%");i.ae.find(".progress-bar").G("width",t+"%")}if(typeof c.Ne==="function"){c.Ne.call(s,i,e)}};p.error=function(e,i,t){if(d.$("onError",c.B)<0){switch(e){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error";break}i.ae.Me("error").find(".fileinfo").ue(" - "+errorMsg);i.ae.find(".progress").remove()}if(typeof c.J==="function"){c.J.call(s,e,i)}i.me=true;if(e=="404_FILE_NOT_FOUND"){p.m.p++}else{p.u.p++}if(t){o.upload.call(s,null,true)}};p.Te=function(e,i,t){if(d.$("onUploadComplete",c.B)<0){i.ae.find(".progress-bar").G("width","100%");i.ae.find(".fileinfo").ue(" - Completed");i.ae.find(".progress").qe(250);i.ae.Me("complete")}if(typeof c.Oe==="function"){c.Oe.call(s,i,i.be.responseText)}if(c.P){setTimeout(function(){o.cancel.call(s,i)},3e3)}i.complete=true;p.m.F++;p.m.count++;p.m.g--;delete i.be;if(t){o.upload.call(s,null,true)}};p.Ue=function(){if(typeof c.ke==="function"){c.ke.call(s,p.m)}};if(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)){c.id="uploadifive-"+s.W("id");p.button=d('<div id="'+c.id+'" class="uploadifive-button">'+c.L+"</div>");if(c.T)p.button.Me(c.T);p.button.G({height:c.height,"line-height":c.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:c.width});s.Re(p.button).Xe(p.button).hide();p.K.call(s);if(!c.S){c.S=c.id+"-queue";p.se=d('<div id="'+c.S+'" class="uploadifive-queue" />');p.button.Be(p.se)}else{p.se=d("#"+c.S)}if(c.N){var i=c.M?d(c.M):p.se.get(0);i.addEventListener("dragleave",function(e){e.preventDefault();e.stopPropagation()},false);i.addEventListener("dragenter",function(e){e.preventDefault();e.stopPropagation()},false);i.addEventListener("dragover",function(e){e.preventDefault();e.stopPropagation()},false);i.addEventListener("drop",p.ne,false)}if(!XMLHttpRequest.prototype.sendAsBinary){XMLHttpRequest.prototype.sendAsBinary=function(e){function byteValue(e){return e.charCodeAt(0)&255}var i=Array.prototype.map.call(e,byteValue);var t=new Uint8Array(i);this.send(t.buffer)}}if(typeof c.Se==="function"){c.Se.call(s)}}else{if(typeof c.Ae==="function"){c.Ae.call(s)}return false}})},debug:function(){return this.i(function(){console.log(d(this).data("uploadifive"))})},Pe:function(){this.i(function(){var e=d(this),t=e.data("uploadifive"),f=t.D;for(var n in t.t){input=t.t[n];limit=input.files.length;for(i=0;i<limit;i++){file=input.files[i];o.cancel.call(e,file)}}if(typeof f.Qe==="function"){f.Qe.call(e,d("#"+t.D.S))}})},cancel:function(f,n){this.i(function(){var e=d(this),i=e.data("uploadifive"),t=i.D;if(typeof f==="string"){if(!isNaN(f)){fileID="uploadifive-"+d(this).W("id")+"-file-"+f}f=d("#"+fileID).data("file")}f.me=true;i.je++;if(f.Ie){i.m.g--;f.Ie=false;f.be.abort();delete f.be;o.upload.call(e)}if(d.$("onCancel",t.B)<0){i.ce(f,n)}if(typeof t.ze==="function"){t.ze.call(e,f)}})},upload:function(n,r){this.i(function(){var e=d(this),i=e.data("uploadifive"),t=i.D;if(n){i.De.call(e,n)}else{if(i.m.count+i.m.g<t.V||t.V===0){if(!r){i.m.xe=0;i.m.He=0;i.m.p=0;var f=i.he();if(typeof t.Ve==="function"){t.Ve.call(e,f)}}d("#"+t.S).find(".uploadifive-queue-item").Ye(".error, .complete").i(function(){_file=d(this).data("file");if(i.m.g>=t.j&&t.j!==0||i.m.g>=t.V&&t.V!==0||i.m.count>=t.V&&t.V!==0){return false}if(t.C){_file.Ze=true;skipFile=i.Ee(_file);_file.Ze=false;if(!skipFile){i.De(_file,true)}}else{i.De(_file,true)}});if(d("#"+t.S).find(".uploadifive-queue-item").Ye(".error, .complete").size()===0){i.Ue()}}else{if(i.m.g===0){if(d.$("onError",t.B)<0){if(i.he()>0&&t.V!==0){alert("The maximum upload limit has been reached.")}}if(typeof t.J==="function"){t.J.call(e,"UPLOAD_LIMIT_EXCEEDED",i.he())}}}}})},Ge:function(){this.i(function(){var e=d(this),i=e.data("uploadifive"),t=i.D;o.Pe.call(e);if(!t.S)d("#"+t.S).remove();e.Ke("input").remove();e.show().insertBefore(i.button);i.button.remove();if(typeof t.We==="function"){t.We.call(e)}})}};d.Je.$e=function(e){if(o[e]){return o[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return o.init.apply(this,arguments)}else{d.error("The method "+e+" does not exist in $.uploadify")}}})(jQuery);